<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Home Page V1 Terminal</title>
  <link rel="stylesheet" href="./app.css"/>
</head>
<body>
<header class="dxtl-header"><img class="logo" src="logo.svg"/><div class="status"><span class="pulse-dot"></span>Live Terminal</div></header>

<div class="app">
  <aside class="nav-rail">
    <div class="brand">
      <svg aria-hidden="true" class="brand-icon" viewBox="0 0 48 48">
        <defs>
          <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0" stop-color="#60A5FA"></stop>
            <stop offset="1" stop-color="#22D3EE"></stop>
          </linearGradient>
        </defs>
        <circle cx="24" cy="24" r="20" fill="url(#g)" opacity=".25"></circle>
        <circle cx="24" cy="24" r="19" fill="none" stroke="url(#g)" stroke-width="2" opacity=".6"></circle>
        <polygon points="21,17 33,24 21,31" fill="url(#g)"></polygon>
      </svg>
      <span class="brand-text">XLT</span>
    </div>

    <nav class="nav-group">
      <button class="nav-btn active" data-route="home"><span class="i">🏠</span><span class="t">Home</span></button>
      <button class="nav-btn" data-route="pulse"><span class="i">📈</span><span class="t">Pulse</span></button>
      <button class="nav-btn" data-route="dex"><span class="i">🔄</span><span class="t">Dex</span></button>
      <button class="nav-btn" data-route="wealth"><span class="i">💼</span><span class="t">Wealth</span></button>
      <button class="nav-btn" data-route="bots"><span class="i">🤖</span><span class="t">Bot Army</span></button>
      <button class="nav-btn" data-route="market"><span class="i">🛒</span><span class="t">Market Place</span></button>
      <button class="nav-btn" data-route="learn"><span class="i">🎓</span><span class="t">Learn Zone</span></button>
    </nav>

    <div class="nav-spacer"></div>

    <nav class="nav-group">
      <button class="nav-btn" data-route="settings"><span class="i">⚙️</span><span class="t">Settings</span></button>
      <button class="nav-btn" data-route="login"><span class="i">🔒</span><span class="t">User Login</span></button>
      <button class="nav-btn" data-route="mt"><span class="i">📊</span><span class="t">MT4/MT5 Account</span></button>
    </nav>
  </aside>

  <main class="main">
    <div class="topbar">
      <span class="badge left">Live Mode</span>
      <div class="topbar-title">Alpha Terminal</div>
      <div class="spacer"></div>
      <div class="wallet" id="wallet-open">
        <span>👛</span>
        <strong id="wallet-status">Disconnected</strong>
      </div>
    </div>

    <div class="content">
      <div class="placeholder">
        <div class="cat-bar">
          <button class="btn" data-cat="all">All</button>
          <button class="btn" data-cat="layer1">Layer 1</button>
          <button class="btn" data-cat="defi">DeFi</button>
          <button class="btn" data-cat="meme">Meme</button>
          <button class="btn" data-cat="ai">AI</button>
          <button class="btn" data-cat="fx">FX</button>
        </div>

        <div class="grid-2">
          <section class="card chart-card">
            <header class="card-head">
              <!-- plain Chart -->
              <h2 class="card-title" id="chartTitle">Chart</h2>
            </header>
            <div class="chart-box" id="chartBox"></div>
          </section>

          <aside class="card side-card">
            <header class="card-head center">
              <div class="segrow" id="modeSeg">
                <button class="seg active" data-mode="risers">Risers</button>
                <button class="seg" data-mode="sinkers">Sinkers</button>
              </div>
              <div class="segrow" id="timeSeg">
                <button class="seg" data-t="1m">1m</button>
                <button class="seg" data-t="5m">5m</button>
                <button class="seg" data-t="15m">15m</button>
                <button class="seg" data-t="1h">1h</button>
                <button class="seg active" data-t="24h">24h</button>
                <button class="seg" data-t="1w">24h</button>
              </div>
            </header>
            <table class="table" id="coinsTable">
              <thead>
                <tr><th>#</th><th>Symbol</th><th>Price</th><th>Change</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </aside>
        </div>

        <section class="card alpha-matrix" id="alphaMatrix">
          <header class="card-head">
            <!-- clean title; spans hidden so JS doesn’t error -->
            <h2 class="card-title">
              Alpha Matrix
              <span id="amSymbol" style="display:none"></span>
              <span class="muted" id="amPeriod" style="display:none"></span>
            </h2>
          </header>
          <div class="am-controls" id="amControls">
            <button class="am-pill active" data-filter="all">All</button>
            <button class="am-pill" data-filter="momentum">Momentum</button>
            <button class="am-pill" data-filter="trend">Trend</button>
            <button class="am-pill" data-filter="volatility">Volatility</button>
            <button class="am-pill" data-filter="volume">Volume</button>
          </div>
          <div class="am-grid" id="amGrid"></div>
          <div class="am-summary" id="amSummary">
            <div class="am-meter bull"><div class="label">Bull</div><div class="val" id="amBull">—</div></div>
            <div class="am-meter neutral"><div class="label">Neutral</div><div class="val" id="amNeutral">—</div></div>
            <div class="am-meter bear"><div class="label">Bear</div><div class="val" id="amBear">—</div></div>
          </div>
        </section>

        <section class="feeds-wrap">
          <div class="feeds-row" id="feedsRowRails">
            <div class="card news-feed" id="newsFeed">
              <div class="feed-header">
                <div class="title">DXLT TERMINAL — X FEED</div>
                <div class="filters">
                  <button class="seg on" data-filter="all">All</button>
                  <button class="seg" data-filter="news">News</button>
                  <button class="seg" data-filter="x">X</button>
                  <button class="seg" data-filter="alerts">Alerts</button>
                </div>
              </div>
              <div id="newsContent" class="news-content"></div>
            </div>

            <div class="card calendar-feed" id="calendarFeed">
              <div class="feed-header">
                <div class="title">CALENDAR</div>
                <div class="filters">
                  <button class="seg on" data-cal="all">All</button>
                  <button class="seg" data-cal="crypto">Crypto</button>
                  <button class="seg" data-cal="fx">FX</button>
                </div>
              </div>
              <div class="legend">
                <span class="dot pos"></span> Positive
                <span class="dot neg"></span> Negative
                <span class="dot neu"></span> Neutral
              </div>
              <div class="calendar-table">
                <table id="calendarTable" class="cal-table">
                  <thead>
                    <tr>
                      <th>Time</th><th>Event</th><th>Prev</th><th>Forecast</th><th>Actual</th><th>Δ</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </section>

        <div>Empty canvas — ready for widgets. Live mode active.</div>
      </div>
    </div>
  </main>
</div>

<div class="modal-backdrop" id="wallet-modal">
  <div class="modal">
    <span class="close-x" id="wallet-close">✕</span>
    <h4>Connect Wallet</h4>
    <p style="color:#94a3b8;margin:0 0 8px 0">Choose a wallet:</p>
    <div class="row">
      <button class="btn full" data-wallet="MetaMask">MetaMask</button>
      <button class="btn full" data-wallet="WalletConnect">WalletConnect</button>
    </div>
    <div class="row">
      <button class="btn" onclick="DXLT.disconnect()">Disconnect</button>
      <button class="btn primary" onclick="document.getElementById('wallet-close').click()">Close</button>
    </div>
  </div>
</div>

<script src="./app.js"></script>
<script src="https://s3.tradingview.com/tv.js"></script>
<script src="./live-widgets.js"></script>
<script src="./alpha-matrix.js"></script>
<footer>DXLT Neon v1.0</footer>
<script src="./feeds.js"></script>

<!-- Hard clamp: keep chart header EXACTLY 'Chart' -->
<script>
(function lockChartTitle(){
  const TARGET = 'Chart';
  const norm = s => (s||'').replace(/[\u00A0 ]*(?:â€”|—|–|-).*/,'').trim();

  function apply(){
    const el = document.getElementById('chartTitle');
    if (!el) return;
    if (norm(el.textContent) !== TARGET) el.textContent = TARGET;
  }

  // initial
  apply();

  // survive node replacement
  new MutationObserver(apply).observe(document.body, {
    subtree: true, childList: true, characterData: true
  });

  // belt-and-braces for late timers
  const tick = setInterval(apply, 400);
  setTimeout(()=>clearInterval(tick), 10000);
})();
</script>

<script>
(() => {
  const routes = {
    home: 'index.html',
    pulse: 'pulse.html',
    dex: 'dex.html',
    wealth: 'wealth.html',
    bots: 'bots.html',
    market: 'market.html',
    learn: 'learn.html',
    settings: 'settings.html',
    login: 'login.html',
    mt: 'mt.html'
  };
  document.querySelectorAll('.nav-btn[data-route]').forEach(btn => {
    btn.addEventListener('click', () => {
      const r = btn.getAttribute('data-route');
      if (routes[r]) window.location.href = routes[r];
    });
  });
})();
</script>

</body>
</html>
